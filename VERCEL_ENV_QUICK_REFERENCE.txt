╔══════════════════════════════════════════════════════════════════════╗
║                 VERCEL ENVIRONMENT VARIABLES                         ║
║                      Quick Reference                                 ║
╚══════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────┐
│  CHỈ CẦN 1 BIẾN DUY NHẤT                                            │
└──────────────────────────────────────────────────────────────────────┘

Key:   NEXT_PUBLIC_API_URL
Value: http://222.252.23.248:4000

Environments: ✓ Production  ✓ Preview  ✓ Development


┌──────────────────────────────────────────────────────────────────────┐
│  CÁCH SETUP NHANH (2 PHÚT)                                          │
└──────────────────────────────────────────────────────────────────────┘

1. Vào: https://vercel.com/hksdtps-projects/thuvienanh/settings/environment-variables

2. Click "Add New"

3. Điền:
   Key:   NEXT_PUBLIC_API_URL
   Value: http://222.252.23.248:4000
   
4. Chọn: Production + Preview + Development

5. Click "Save"

6. Vào tab "Deployments" → Click "..." → "Redeploy"


┌──────────────────────────────────────────────────────────────────────┐
│  SAU KHI DEPLOY THÀNH CÔNG                                          │
└──────────────────────────────────────────────────────────────────────┘

1. Lấy URL Vercel (ví dụ: https://thuvienanh.vercel.app)

2. Update .env trên VPS:
   
   nano .env
   
   # Thêm dòng:
   ALLOWED_ORIGIN=https://thuvienanh.vercel.app
   
   # Save: Ctrl+O, Enter, Ctrl+X

3. Restart backend:
   
   pm2 restart thuvienanh-api
   
   # Hoặc nếu dùng npm run dev:
   Ctrl+C
   npm run dev


┌──────────────────────────────────────────────────────────────────────┐
│  TEST                                                                │
└──────────────────────────────────────────────────────────────────────┘

1. Mở: https://thuvienanh.vercel.app

2. F12 > Console

3. Test env var:
   console.log(process.env.NEXT_PUBLIC_API_URL)
   // Phải hiển thị: http://222.252.23.248:4000

4. Test API:
   fetch('http://222.252.23.248:4000/api/health')
     .then(r => r.json())
     .then(console.log)
   // Phải trả về: { status: "healthy", ... }


┌──────────────────────────────────────────────────────────────────────┐
│  TROUBLESHOOTING                                                     │
└──────────────────────────────────────────────────────────────────────┘

❌ CORS Error:
   → Check ALLOWED_ORIGIN trên VPS
   → Restart backend

❌ API 404:
   → Check backend đang chạy: pm2 status
   → Check URL đúng: curl http://222.252.23.248:4000/api/health

❌ Env var undefined:
   → Redeploy lại trên Vercel
   → Clear browser cache


┌──────────────────────────────────────────────────────────────────────┐
│  LINKS                                                               │
└──────────────────────────────────────────────────────────────────────┘

Vercel Dashboard:
https://vercel.com/hksdtps-projects/thuvienanh

Environment Variables:
https://vercel.com/hksdtps-projects/thuvienanh/settings/environment-variables

Deployments:
https://vercel.com/hksdtps-projects/thuvienanh/deployments

Full Documentation:
VERCEL_ENV_SETUP.md


┌──────────────────────────────────────────────────────────────────────┐
│  NOTES                                                               │
└──────────────────────────────────────────────────────────────────────┘

✓ Chỉ cần 1 biến vì dùng static export
✓ Database variables chỉ cần trên VPS
✓ NEXT_PUBLIC_* prefix để client-side access
✓ Không commit sensitive data vào Git
✓ Update ALLOWED_ORIGIN sau khi có URL Vercel


═══════════════════════════════════════════════════════════════════════

                        THAT'S IT! 🚀
                    Simple & Effective!

═══════════════════════════════════════════════════════════════════════

